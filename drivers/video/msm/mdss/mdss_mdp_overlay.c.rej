--- drivers/video/msm/mdss/mdss_mdp_overlay.c	2017-03-12 21:44:09.000000000 -0500
+++ drivers/video/msm/mdss/mdss_mdp_overlay.c	2017-05-08 21:34:59.000000000 -0500
@@ -2035,8 +2071,9 @@
 	struct mdss_mdp_ctl *ctl = mfd_to_ctl(mfd);
 	int ret = 0;
 	struct mdss_mdp_commit_cb commit_cb;
+	u8 sd_transition_state = 0;
 
-	if (!ctl)
+	if (!ctl || !ctl->mixer_left)
 		return -ENODEV;
 
 	ATRACE_BEGIN(__func__);
@@ -2077,7 +2114,8 @@
 	if (ctl->ops.wait_pingpong && mdp5_data->mdata->serialize_wait4pp)
 		mdss_mdp_display_wait4pingpong(ctl, true);
 
-	if (mdp5_data->sd_transition_state != SD_TRANSITION_NONE) {
+	sd_transition_state = mdp5_data->sd_transition_state;
+	if (sd_transition_state != SD_TRANSITION_NONE) {
 		ret = __config_secure_display(mdp5_data);
 		if (IS_ERR_VALUE(ret)) {
 			pr_err("Secure session config failed\n");
@@ -2165,7 +2203,7 @@
 	 * If we are transitioning from secure to non-secure display,
 	 * disable the secure display.
 	 */
-	if (mdp5_data->sd_enabled && (mdp5_data->sd_transition_state ==
+	if (mdp5_data->sd_enabled && (sd_transition_state ==
 			SD_TRANSITION_SECURE_TO_NON_SECURE)) {
 		ret = mdss_mdp_secure_display_ctrl(mdp5_data->mdata, 0);
 		if (!ret)
